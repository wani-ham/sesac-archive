<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HOME</title>
    <!-- CDN -->
     <!-- 서버가 실행 중이지 않아도 클라이언트 라이브러리를 사용할 수 있음 -->
    <!-- <script src="https://cdn.socket.io/4.7.5/socket.io.min.js" integrity="sha384-2huaZvOR9iDzHqslqwpR87isEmrfxqyWOF7hr7BY6KG0+hVKLoEXMPUJw3ynWuhO" crossorigin="anonymous"></script> -->
    
    <!-- socket.io server가 제공하는 클라이언트 라이브러리 -->
    <script src="/socket.io/socket.io.js"></script>
</head>
<body>
    <h1>My Chat</h1>

    <!-- [실습 1] 각 버튼을 누를때마다 서버로 메세지 전송  -->
     <button onclick="sayHello();">Hello</button>
     <button onclick="sayStudy();">Study</button>
     <button onclick="sayBye();">Bye</button>
     <p id="from-server"></p>

    <script>
        let socket = io();
        socket.on('connect', () => {
            console.log(`Client connected :: ${socket.id}`);
            console.log(socket);
        })

        // 실습 1
        function sayHello() {
            socket.emit('hello', {who: 'client', msg: 'hello'});
        }

        socket.on('hellokr', (data) => {
            console.log(`Who: ${data.who}, MSG: ${data.msg}`);
            document.querySelector('#from-server').textContent = `Who: ${data.who}, MSG: ${data.msg}`;
        })

        function sayStudy() {
            socket.emit('study', {who: 'client', msg: 'study'});
        }

        socket.on('studykr', (data) => {
            console.log(`Who: ${data.who}, MSG: ${data.msg}`);
            document.querySelector('#from-server').textContent = `Who: ${data.who}, MSG: ${data.msg}`;
        })

        function sayBye() {
            socket.emit('bye', {who: 'client', msg: 'bye'});
        }

        socket.on('byekr', (data) => {
            console.log(`Who: ${data.who}, MSG: ${data.msg}`);
            document.querySelector('#from-server').textContent = `Who: ${data.who}, MSG: ${data.msg}`;
        })
    </script>
</body>
</html>